var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequire1092;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,o.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire1092=o);var s=o("6AR8M"),a=o("gdelx"),r=o("fhN3L"),c=o("k8Jq9");o("k8Jq9"),c=o("k8Jq9");const i=document.querySelector("#my-update-btn"),l=(0,r.initializeApp)(c.firebaseConfig),d=(0,a.getDatabase)(l),u=(0,s.getAuth)(l);i?.addEventListener("click",(async e=>{e.preventDefault(),f()}));const f=()=>{const e=document.querySelector("#my-update");(0,s.onAuthStateChanged)(u,(async t=>{if(t){const n=(0,a.ref)(d,"users"),o=(await(0,a.get)(n)).val();console.log(o);const s=t.uid,r=(0,a.ref)(d,"posts/"),c=(0,a.push)(r);(0,a.set)(c,{userId:s,content:e.value})}}))};window.addEventListener("load",(()=>{(0,s.onAuthStateChanged)(u,(async e=>{if(console.log("auth state changed",e),e){const t=g(),n=t||e.uid,o=(0,a.getDatabase)(),s=(0,a.ref)(o,`users/${n}`);(0,a.onValue)(s,(e=>{const t=e.val();console.log("userData",t),console.log(t.profilePicture),console.log(t.username);const n=document.querySelector("#username"),o=document.querySelector("#pic");n.innerHTML=t.username,o.src=t.profilePicture})),p();const r=(0,a.getDatabase)(),c=(0,a.ref)(r,"users"),i=(await(0,a.get)(c)).val();console.log(i);const l=document.querySelector("#user-container");Object.entries(i).forEach((([e,t])=>{const n=t;console.log(n.username);const o=document.createElement("p");o.setAttribute("data-user-id",e),o.innerHTML=n.username,l.append(o),o.addEventListener("click",(()=>{window.location.href=`./profile.html?userId=${e}`}))}))}}))}));const p=()=>{const e=g(),t=(0,a.getDatabase)(),n=(0,a.ref)(t,"posts"),o=(0,a.ref)(t,"users");(0,a.onValue)(n,(async t=>{const n=t.val(),s=document.querySelector(".posts");s.innerHTML="";for(const t in n){const r=n[t];if(e&&r.userId!==e)continue;const c=r.content,i=r.userId,l=(await(0,a.get)((0,a.child)(o,i))).val();if(l){const e=document.createElement("div");e.className="post-item",e.innerHTML=`\n          <h3 class="postName">${l.username}</h3>\n          <p class="postContent">${c}</p>\n        `,s.appendChild(e)}}}))};function g(){return new URLSearchParams(window.location.search).get("userId")}document.getElementById("delete").addEventListener("click",(async()=>{try{await(0,c.deleteUser)().then((()=>{window.location.assign("../index.html")}))}catch(e){console.error("Error deleting user and data:",e)}}));document.getElementById("logOut").addEventListener("click",(async()=>{await(0,c.signOut)().then((()=>{window.location.assign("../index.html")}))}));
//# sourceMappingURL=mainpage.7f64ce5f.js.map
